#Install several packages or iterate through the list of items

tasks:
- name: install services
  yum: name={{item}} state=installed
  with_items:
  - httpd
  - python
  - mysql
  
#Install only on RHEL 7

tasks:
- name: don't install on ubuntu machines
  yum: name=httpd state=latest
  when: (ansible_os_family=="RedHat" and ansible_distribution_major_version=="7")
  
#Boolean if test

vars:
  myvar: true
  
- name: check boolean
  shell: echo "myvar = false"
  when: not myvar
  
 #Print log if log contains a certain phrase
 
  - name: checking systemd
    shell: cat /var/log/messages
    register: log_output
    
  -name: next task
   shell: echo "I find ansible in the log messages"
   when: log_output.stdout.find('ansible') !=0
   register: shell_echo
   
  -debug: var=shell_echo
  
  #Do tasks in Block if certain conditions are true
  
  tasks:
     - block:
       - name: install httpd
         yum: name=httpd state=latest
       
       - name: create config
         template: src=httpd.conf dest=/etc/httpd/conf/httpd.conf
         notify: restart httpd
      
       - name: start httpd service
         service: name=httpd state=started enabled=yes
         
        when: ansible_os_family="RedHat"
        become: yes
      
  
